# 3 EN: Data Science

## Basics

- What are the two most common stochastic modelling approaches and in which areas (unsupervised/supervised) are they applied?
    - Joint probability function (Unsupervised Learning)
    - conditional probability function (Supervised)
- What are the reasons for prediction/forecast errors?
    - Used model cannot depict real situation
    - Randomness at generating the dataset from the real model (if dataset is small)
    - Randomness at learning (e.g. stochastic gradient descent, simulated annealing)
- What is the concept of I.I.D ?
    - Independent Identically Distributed. Each of the n feature vectors is independent from the others and all have their origin in the same probability distribution.
- What is the definition of the Likelihood L(ùúó | G)?
    - For the likelihood L we usually take data G as given and evaluates the likelihood as function of ùúó
- What is the definition of P(G | ùúó)?

    For a given ùúó we evaluate the probability of different results G of the data generation.

    ![3%20EN%20Data%20Science%20fa58d61a8fcb4fe6ae468822baa9dde3/Untitled.png](3%20EN%20Data%20Science%20fa58d61a8fcb4fe6ae468822baa9dde3/Untitled.png)

    probability is the quantity most people are familiar with which deals with predicting new data given a known model ("what is the probability of getting heads six times in a row flipping this 50:50 coin?") while likelihood deals with fitting models given some known data ("what is the likelihood that this coin is/isn't rigged given that I just flipped heads six times in a row?"). I wanted to add this perspective because using the example in this clip, a likelihood quantity such as 0.12 is not meaningful to the layman unless it is explained exactly what 0.12 means: a measure of the sample's support for the assumed model i.e. low values either mean rare data or incorrect model!

    Source: [https://www.youtube.com/watch?v=pYxNSUDSFH4](https://www.youtube.com/watch?v=pYxNSUDSFH4)

- What is the Maximum-Likelihood-Prinicipal?
    - We determine parameter ùúó that results in the max Likelihood for given data G

        ùúó_hat = argmax ùêø ( ùúó | ùê∫ )

- What is the definition of a generative stochastical model?
    - We talk about a a generative stochastical model for a data-mining challenge, on the assumption, that the data was generated by a stochastically process with a known structure (which most has unknown parameters)
- What is the difference between the Naive Bayes Classifier and the Bayes classifier?
    - TL; DR: The naive Bayes classifier is an approximation to the Bayes classifier, in which we assume that the features are conditionally independent given the class instead of modeling their full conditional distribution given the class.
    - Taken from:[https://www.quora.com/What-is-the-difference-between-the-Naive-Bayes-Classifier-and-the-Bayes-classifier](https://www.quora.com/What-is-the-difference-between-the-Naive-Bayes-Classifier-and-the-Bayes-classifier)

### Bias-Variance Tradeoff & Bayesian Statistic

- What is the definition of Bias?
    - The bias of a learned model for a specifically predicted value f(x_0) is the deviation between the expected value E(f(x_0) and the predicted value f(x_0) of the true value. (Ergo the estimaton of the parameter is not unbiased)
- How is the Bias produced/generated?
    - Often the consequence is that the function class used in learning is not powerful enough to model the true context, or is prevented by regularization or a prior from choosing the parameters appropriately.
- Definition Variance
    - The variance of the learned model for a certain predicted value ùëì(ùë•) is understood to be a random deviation from the predictable portion ùëì(ùë•) of the true value.
    - Especially for models with (too) many degrees of freedom, the prognosis result will be strongly influenced by the coincidence of the perturbation ùúñ, because the model can and will then also model this random noise, which turn out differently with each repetition.
- What is the composition of the Mean Squared Error (MSE) ?
    - MSE =  Variance + Bias (E(f(x) - f'(x))^2) + non predictable portion/noise (epsilon)
- Describe the Tradeoff between Bias and Variance
    - Suppose I took different degrees of freedom. Then my model will have a higher bias with fewer degrees of freedom, but a lower variance
    - The optimal total error is usually achieved somewhere in the middle of the model complexity, i.e. neither too much bias nor too much variance is desired.
    - However, if I know that a parameter is in fact independent of others, then the model would be limited if I did not treat it as such. In this case, after remodelling, I reduce the variance without increasing the bias.
    - ‚Üí Goal: Find independent Variables

### Bayes

- What is the difference between the Bayesian learning approach and the classical one?
    - The a-priori probability distribution is given and we generate a parameter vector THETA based on it. (One-time execution). This is used to generate the data using random experiments.
    - Based on the random sample, bayes is applied and the a-posteriori probability distribution is calculated (without bayes you would have a histogram here, which would basically be the Prior?)
    - A-posteriori is used for Inferenc/Recall
- What are the advantages of the Bayesian learning approach?
    - The uncertainty of the estimates is taken into account in a consistent manner
    - Therefore less tendency to overfitting
    - The assumptions become explicitly visible in the form of the prior
- What are the disadvantages of Bayesian learning?
    - The Prior must be mostly subjectively guessed.
    - The recall/inference is usually too complex for exact calculation and must be approximated numerically. (With all imaginable parameter values must be predicted, followed by weighted averaging).
- Definition Prior
    - A-priori (i.e. prior knowledge of the data assumed on the basis of prior knowledge) probability distribution of the unknown parameters
- Definition Posterior
    - A-posteriori (i.e. determined in consideration of data and prior knowledge) probability distribution of unknown parameters
- Is Bayes suitable for the practice?
    - No, because calculating the integral over all possible parameters analytically is too costly
- Why do people still like to use Bayes?
    - Serves as a source of intuition as to what one should expect for a good prognosis
    - Approaches of Model Averaging can be considered as approximations of Bayesian learning
- Give an example approach for the approximation of Bayes
    - Bagging: Different sampling (random) and training of separate models. Inference averages the predictions of all models. Predictions turn out differently because of different samples.

## Dimensionality reduction

- Why should dimensions be reduced?
    - Too high dimensions lead either to computational problems or worsen performance due to irrelevant input. (Curse of Dimensionality)
- Which modeling assumptions are made to solve the problem?
    - Assumption of a linear relationship (correlation of two features)
    - Assumption of irrelevant features (input pruning)
    - Assumption that the problem can be solved by a linear projection of the input space (PCA)
- Name concrete approaches for the reduction of dimensions
    - Omit unimportant inputs (Input Pruning, Feature Selection), e.g. by
        1. Greedy Algorithm: remove the (apparently) least important one several times in succession
        2. Ideal selection: Train a model with each subset of inputs and take the best one.
    - Summarize inputs. (e.g. through aggregation or more complex transformations such as PCA (Principal Component Analysis))
- What are the critical points of  a) Greedy, b) Ideale Selection and c) PCA?
    - a) Greedy selection can lead to suboptimal decisions
    - b) Impracticable, as it is too costly. Overtraining in input selection possible.
    - c) **PCA** considers only the statistical distribution of input values, without considering the relevance for the output.
- Explain the idea of PCA (Principal Component Analysis)?
    - The idea is to eliminate axes representing variables by appropriate rotation (columns of the rotation matrix are orthogonal). One wants to omit the axes that express little variance of the data, which is caused, for example, by the correlation of two variables. This results in two goals:
        - the **resulting variables are linearly independent** of each other.
        - the transformed dimensions have **as much variance** as possible and are sorted by the decreasing variance of the data
    - Intuition:
        - Preserve the information available in n variables as good as possible in m variables, where m<n.

    However: Result depends on the scaling of the inputs.

- Name the steps of the PCA
    - Step 1: Make the variables as independent as possible by rotation
    - Step 2: Omit the variables with the lowest variance, for example the second main component

## Sampling

- What is sampling and when should sampling be applied?
    - If the data set is too large, the approaches are first tested on small excerpts. If the results are good, the large data set can be used.
- What are the possibilities for downsizing?
    - Reduce number of tables or columns
    - Reduce number of rows
- What options are there for reducing the number of columns?
    - Omitting tables or columns (only the important columns are kept)
    - Column aggregation (averaging of columns, e.g. pixels of images) E.g. replace measured values from different sensors by their average value
    - Dimension reduction, e.g. with PCA
- What options are there for reducing the number of rows?
    - Aggregation of several rows

        E.g. measured values that were recorded at millisecond intervals can be made larger by averaging them at one-second intervals

    - Simple Random Sampling
        - Without putting it back: default case
        - With putting back: Loses more information, desired if stronger randomness is required
    - Stratified Sampling
        - Amount of data is divided into groups/categories and simple random sampling is performed on these groups. This ensures that the same amount of data is sampled from both groups. (Important if you want to keep the original distribution, e.g. elections)
    - Systematic selection (by hand, manual)
- What is the advantage of random sampling?
    - Both are robust, in case that the data set is arranged according to some systematic.
- What is the difference between the variant "without replacement" and the variant "with replacement"?
    - Variant without replacement is the standard procedure and produces less variance than "with‚Äù
    - "With" is used if more variance is desired (e.g.: bagging)
- What is a Bias?
    - Systematic estimation error
- Which value increases the standard deviation for pure random sampling?
    - With the reciprocal of the root of the sampling rate
- When is bias generated during sampling?
    - If the sampling selects data objects based on different probabilities
- How can the generated bias be compensated?
    - if the data sets in the sample are assigned weighting factors that are inversely proportional to the probability of their being selected into the sample. ‚Üí reciprocal value
        - Example: Fraud cases with 100%, not fraud cases with 0.1% in the sample. Compensate by weighting data sets in the sample with the reciprocal of their sample probability. => not fraud * 1000
- Give two examples of criteria for systematic selection
    - Deterministic selection criterion with link to the data contents. Extreme form of stratified sampling in which nothing is left to random chance.
    - Example: A department store with an inventory of 100,000 products and 100 branches creates a data record of 10 million purchase transactions - for each product one transaction from each branch.
    - Deterministic selection criterion without relevance to the data contents:

    Example: Every 10th row of the data set (corresponds to random sampling for randomly sorted data)
- What does the abbreviation IID stand for and what does it mean?
    - Independent and identically distributed random variables
        - Rows are independent of each other and are all subject to the same distribution
- What problems can occur when sampling relational data (across multiple tables)?
    - Integrity violations during subsequent joins (e.g. purchase order item with order_id for which there is no master data)
    - Cross-record key figures can be falsified. (e.g. number of articles per shopping cart, average time interval between orders from a customer)
    - Integrit√§tsverletzungen bei sp√§teren joins (z.B. Bestellposition mit order_id, zu der es keine Stammdaten gibt)

    Falsifications can be corrected, but are very costly and depend on the type of key figure calculation. In addition, the corrected values tend to have a very high variance.

- What would be the best solution for relational sampling?
    - Look at the data and best is to sample the data on the top level and then join it (e.g. UserId is top level, join from order_ids)
- What are the disadvantages of relational sampling?
    - If more than one table is processed, it may not be feasible
    - Sampling depends on the model approach and features used. 
    (e.g. if we at Instacart want to have a variable for every order that tells us how shortly before the last order was received by Instacart - no matter which user)

## Metrics

- What is the ROC curve? (Also called Precision Recall Curve)

    [ROC and AUC, Clearly Explained!](https://www.youtube.com/watch?v=4jRBRDbJemM)

    - ROC is used if you want to compare different values for a threshold.
    - Comparison of True Positive Rate (Sensitivity) and False Positive Rate (1- Specifity)

        ![3%20EN%20Data%20Science%20fa58d61a8fcb4fe6ae468822baa9dde3/Untitled%201.png](3%20EN%20Data%20Science%20fa58d61a8fcb4fe6ae468822baa9dde3/Untitled%201.png)

    - For each new threshold the values are recalculated and plotted again. Here you can see that there are two points that would be best. The left point would have no false positives at all. Depending on the use case, a decision must be made here. The points can still be connected to a line.

        ![3%20EN%20Data%20Science%20fa58d61a8fcb4fe6ae468822baa9dde3/Untitled%202.png](3%20EN%20Data%20Science%20fa58d61a8fcb4fe6ae468822baa9dde3/Untitled%202.png)

- What is AUC?
    - Area under the Curve. Describes the area below the curve and is very useful for comparing different approaches

        ![3%20EN%20Data%20Science%20fa58d61a8fcb4fe6ae468822baa9dde3/Untitled%203.png](3%20EN%20Data%20Science%20fa58d61a8fcb4fe6ae468822baa9dde3/Untitled%203.png)

- What is the disadvantage of AUC?
    - Compared to Precision, an imbalance of the data (e.g. the true negative) can have an effect on the result.
- Provide metrics for regression models
    - Mean squared error
    - Root mean squared error
    - Mean absolute error
    - Median absolute error
- What is the advantage of Root Mean Squared Error?
    - Makes the mean squared error more interpretable
- What is the advantage of Mean Absolute Error?
    - Not so sensitive to outliers (more robust)
- What is the advantage of Median Absolute Error?
    - Even more robust against outliers
- When should Precision be used?
    - Suitable for highly unbalanced problems
- What are the two approaches to multiclass classification?
    - Look at the binary classification for each class. "belongs" or not. Average values over classes.

        a) Arithmetic mean "macro averaging" ‚Üí Not well-founded, rather poor

        b) Weighted by class frequency "Weighted Averaging" ‚Üí Better

    - Multiclass Confusion Matrix ‚Üí "Micro Averaging" ‚Üí Best option: No metrics are created for multiple classes

        ![3%20EN%20Data%20Science%20fa58d61a8fcb4fe6ae468822baa9dde3/Untitled%204.png](3%20EN%20Data%20Science%20fa58d61a8fcb4fe6ae468822baa9dde3/Untitled%204.png)

    - Taken from: [https://towardsdatascience.com/multi-class-metrics-made-simple-part-ii-the-f1-score-ebe8b2c2ca1](https://towardsdatascience.com/multi-class-metrics-made-simple-part-ii-the-f1-score-ebe8b2c2ca1)

## Graphical Models

- What does a graphical model represent?
    - The stochastic (in)dependence structures between random variables, that are modeled as nodes
- What types of networks are there?
    - Causal networks (includes causal structure)
    - Bayesian networks (dependency structure like for causal networks, but without causal structure). Directed Graph
    - Markov networks (undirected graph)
- What is the difference between a causal network and a Bayesian network?
    - By knowing the causality relationships it is possible to predict what happens when you change variables. With Bayes networks only a conclusion is made about what happens with what probability if you do not manipulate/intervene the system.

## EM (Expectation-Maximization)-Algorithm

- What is the goal of the EM-Algos?
    - Clustering of data points using the a-priori values variance and mean.
- Describe the process of the EM

    Starting point: A cluster of data points without knowing by which probability function the values are created.

    ![3%20EN%20Data%20Science%20fa58d61a8fcb4fe6ae468822baa9dde3/Untitled%205.png](3%20EN%20Data%20Science%20fa58d61a8fcb4fe6ae468822baa9dde3/Untitled%205.png)

    1. Estimate the a-priori value for variance and mean value (start with two randomly placed Gaussians)
    2. Estimate Step: Use Bayes Rule to estimate the probability of a point belonging to a certain distribution. Either blue or yellow, but no hard assignment, only the probability (between 0 and 1).
    3. Maximize step: Update mu and variance based on the points that were assigned softly

        ![3%20EN%20Data%20Science%20fa58d61a8fcb4fe6ae468822baa9dde3/Untitled%206.png](3%20EN%20Data%20Science%20fa58d61a8fcb4fe6ae468822baa9dde3/Untitled%206.png)

    - Source: [https://www.youtube.com/watch?v=REypj2sy_5U&list=PLBv09BD7ez_4e9LtmK626Evn1ion6ynrt&ab_channel=VictorLavrenko](https://www.youtube.com/watch?v=REypj2sy_5U&list=PLBv09BD7ez_4e9LtmK626Evn1ion6ynrt&ab_channel=VictorLavrenko)

- How does EM differ from K-Means?
    - If you make a hard assignment in the E step (hard assignment to a cluster), that means each missing value is set to the most likely value, instead of continuing with the whole probability distribution, you get exactly the k-means algorithm.

## Data Quality, Missing Values, and Outliers

- When do data flaws not bother you?
    - If the frequency and type of flaws in the selected model type do not indicate a major change in the result. (e.g. single, minor measurement errors, rare outliers with an approach robust against outliers such as Median Absolute Error instead of Mean Squared Error)
    - If they can be considered as part of the learning problem
- When does it make sense to take data flaws into training?
    - Training the model with it makes sense if the same deficiencies are also present as input when using the model. The advantage is that no effort is required for data cleansing and if the model can handle it, it is an optimal solution. The disadvantage is that a combination with expert knowledge or models from other sources is difficult. If necessary, rename the feature, for example Temperature ‚Üí Temperature reported by sensor
- Specify causes for missing values
    - Incomplete data collection (sensor failure, questionnaire incomplete)
    - Variable makes no sense (e.g. "time since last order" for first order)
- How can outliers be detected?
    - Check the value range of the variables for plausibility, possibly look at the histogram.
    - Display joint distribution of pairs of variables, e.g. as a scatter diagram
    - Learn the probabilistic model of the common probability distribution of all variables (i.e. unsupervised). Data objects with the smallest probability are outlier candidates. (Or, for non-probabilistic clustering model: Objects with a large distance from their cluster center, as well as clusters with very few assigned points are candidates).
- How should outliers be dealt with?
    - Leave it in (in any case at (3); also at (2), if the learning process can cope with it).
    - Possibly, use a robust model type (e.g. Median Absolute Error instead of Mean Squared Error)
    - Replace with replacement value or treat as missing.
- What types of missing values are there?
    1. **MCAR: Missing Completely at Random**: 

        Whether a value is missing or not is stochastically independent of all input and output variables.
        Example: Transmission error due to radio interference when reading out a radio temperature sensor.

    2. **MAR: Missing at Random**: 

        Whether a value is missing or not is stochastically independent of the missing value.
        Example: Women are less willing to give their age in a survey than men. Here: stochastic dependence on gender, but not on age itself.

    3. **NMR: Not Missing at Random: Whether a value is missing or not depends on the missing value.**
    Example: Older women are less willing to reveal their age than younger ones.
- Which of the three types does not lead to a bias?
    - MCAR
- Mention points for dealing with missing values
    1. Use approaches that can handle missing values (for example, Naive Bayes classifier, certain decision tree variants)
    2. Ignore affected data objects completely
    3. Use affected data objects only partially
    4. Insert a substitute value (imputation)
    5. Use probability distribution of the missing value as a substitute. (EM algorithm)
    6. Code 'value missing' as a special value of the variable. Thus, a model (or, in the case of manual analysis, a human) with approaches that require complete data can be applied to incomplete data.

    All these procedures only work under certain conditions. There is no way around finding out (or making assumptions) why the values are missing.

- Handling missing values: Explain advantages/disadvantages of Naive Bayes classifier
    - Usually leads to bias, if not MCAR.
    - Advantage: Very simple, because you can simply omit one variable in the term.
- Handling missing values: Explain advantages/disadvantages when affected data objects are completely ignored
    - **Advantage**: Simplest approach.
    - **Disadvantage**: Available data shrinks. Under certain circumstances this can happen very strongly.
    Example: If there are 100 variables, and each individual value is missing with 2% probability (independent of the others), only 13% of the data objects are complete
    - May lead to bias if not MCAR and the output variable is stochastically dependent on the absence of the input variable (Supervised Learning), or if the absence of the input variable depends on the value of a variable whose probability distribution is to be modeled (Unsupervised Learning).
    - **Prerequisite**: Only suitable when little is missing.
- Handling missing values: Explain advantages/disadvantages of affected data objects only partially used
    - **Advantage**: Data is optimally used
    - **Prerequisites**/**Disadvantage**: May lead to bias if not **MCAR**, just like when affected data objects are completely ignored.

        Example: In the scatterplot for the dimensions (X1, X2) omit the data objects where X1 or X2 are missing, in the scatterplot (X2, X3) omit those where X2 or X3 are missing.

- Handling missing values: Explain advantages/disadvantages of using substitute values (imputation)
    - (a) For quantitative feature, e.g. **mean** or **median**
    - (b) For ordinal feature: **median**
    - (c) For nominal feature: **modal value**; or
    - d) CPS hot deck (Current Population Survey): Use the value of the previous data object for this feature. (This means that a **random value is taken from the distribution of this feature**)
    - e) Or in general: **Learn a predictive model** for the missing feature and thus estimate the missing values. Common: **k-nearest neigbor**

    **Advantage** of a-d: Simple

    **Downside**:

    - a - c falsifies the distribution of the missing attribute even with MCAR

        ‚Üí possibly **Bias** in the results

    - (d) still generates **some bias** (because dependencies are not taken into account), but less than a-c, but additionally **variance (model error/variance due to arrangement of objects)**
    - (e) produces no variance and even less bias than (d) (bias by using only the most likely value). Is **more expensive**. (Minimum bias is present because I take the best value)

- Handling missing values: Explain advantages/disadvantages of using probability distribution of missing value as a substitute. (EM algorithm)
    - Learn the prediction model for the probability distribution of the missing feature to estimate the missing feature from the other features (EM algorithm)
    - Create multiple data objects with the estimated probability values and weight the estimated value with the assigned probability.

        A**dvantage**: **Best practice from a statistical point of view**, with MCAR there is no bias (or only to the extent that the model used has bias).

        D**isadvantage**: **High effort.** Only worth it if many important values are missing.

- Handling missing values: Explain advantages/disadvantages of "value missing" encoding as a special value of the variable.
    - No problems with nominal variables
    - Not very nice with metric or ordinal variables (e.g. -99 = "missing").

        Whether this is an issue depends on the model types used.

        ‚Üí Solution:

        - Perhaps assign **additional binary variables (F1 ... Fn)** to the variables (X1 ... Xn), which specify, which of the X-values are missing (nevertheless you need replacement values for the missing values in X).

        **Prerequisite**: It makes sense to learn **missing values as part of the problem definition**.

        **Advantage**: **Little effort**. If the model can handle it, **optimal solution**.
        **Disadvantage**: With ordinal or **metric features** the subject is **difficult to model** for many model types.

- How does the bias behave with MCAR and "omitting data objects", imputation and the EM algorithm?
    - Generally unproblematic.
    - In this case, **Omitting** the relevant data objects results in **no bias**, but in an increase in the variance of the model because the amount of training data is reduced. A data scientist works on a random sample of the (unknown) complete data set.
    - If you let a model learn to estimate the probability distribution of the missing value depending on the other variables and thus generate replacement values, this also leads to **no bias.**
    - However, using only the **most probable replacement value**, or the **mean** or **median**, generally results in a systematic deviation of the completed data set from the true values, and therefore in a **bias**.

- How does the **bias** behave with MAR and by using "omitting data objects", orr imputation and the EM algorithm?
    - *Omitting* in MAR, if the value of the missing variable is to be estimated, leads to distorted estimates (**bias** increases)
    - *Replacing by mean value* in MAR if the value of the missing variable is to be estimated, leads as well to distorted estimates (**bias** increases).

    Then the missing value is stochastically independent of the missing one under the condition that the other variables are known:

    1. If the variables on which the absence is stochastically dependent only serve as input variables, **no bias** occurs in the conditional probability distribution (or regression task) to be estimated, if one **just leaves out** the incomplete data sets.
    2. If the absence also depends on output variables, or if a common probability distribution is to be estimated, omitting the data objects with missing values results in a **bias**. However, this **bias** can be **compensated** by creating an estimation model for the probability of the absence depending on the variable values, and then weighting the **data records with the reciprocal of the probability of absence**.

- How does the bias behave in NMR and by using "omitting data objects" or imputation and the EM algorithm?
    - Omitting the incomplete data objects generally leads to a **bias**.
    - Problem: This can not be **compensated**, because the dependency of the missing
    missing probability on the missing variable cannot be estimated. (No training data)
    - Also **imputation procedures** lead to a **bias** because there is no training data for data objects with missing values, but the value distribution for these data objects is different from that for those without missing values.

    If there is a risk that the missing values will have a significant influence on the results, the data must be collected again.

- When is a clean approach to the problem critical?
    - If a strong correlation between the missing and the target value of the modelling is to be feared
- What should be done first when it is noticed that features are incomplete?
    - Make assumptions about the mechanism by which the missing values arise.
- When are the generated model errors probably not critical and a simpler procedure should be chosen?
    - If only a few values are missing in a non-critical feature, or in general if values are missing in a non-essential feature.
- What should be done if data with the same systematics is expected to be missing when given as input to the inference?

    ‚Üí Interpret missing data as part of the problem definition, give the model the information what is missing as input

- Requirements for a bayes network?
    - It is not allowed to be cyclical
    - Must have directional edges